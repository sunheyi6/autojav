# AutoJava CLI ä»£ç åˆ’åˆ†è¯´æ˜

## ğŸ“‚ å½“å‰é¡¹ç›®ç»“æ„åˆ†æ

```
src/main/java/com/autojav/
â”œâ”€â”€ cli/                          # å‘½ä»¤è¡Œæ¥å£å±‚
â”‚   â”œâ”€â”€ Main.java                 # âœ… å…è´¹ - ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ AuditCommand.java         # âš ï¸ æ··åˆ - åŸºç¡€å…è´¹ï¼Œé«˜çº§åŠŸèƒ½ä»˜è´¹
â”‚   â”œâ”€â”€ ConfigCommand.java        # âœ… å…è´¹ - é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ DocCommand.java           # âœ… å…è´¹ - æ–‡æ¡£ç”Ÿæˆ
â”‚   â””â”€â”€ LicenseCommand.java       # âš ï¸ ä»˜è´¹ - è®¸å¯è¯ç®¡ç†ï¼ˆå›¢é˜Ÿç‰ˆ+ï¼‰
â”‚
â”œâ”€â”€ core/                         # æ ¸å¿ƒå¼•æ“å±‚
â”‚   â”œâ”€â”€ CodeParser.java           # âœ… å…è´¹ - ä»£ç è§£æå¼•æ“
â”‚   â”œâ”€â”€ ConfigManager.java        # âœ… å…è´¹ - é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ TerminalUtils.java        # âœ… å…è´¹ - ç»ˆç«¯å·¥å…·
â”‚   â”œâ”€â”€ ExceptionHandler.java     # âœ… å…è´¹ - å¼‚å¸¸å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ audit/                    # å®¡è®¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ AuditManager.java     # âœ… å…è´¹ - å®¡è®¡ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ AuditResult.java      # âœ… å…è´¹ - å®¡è®¡ç»“æœ
â”‚   â”‚   â”œâ”€â”€ AuditRule.java        # âœ… å…è´¹ - è§„åˆ™æ¥å£
â”‚   â”‚   â””â”€â”€ rules/                # å®¡è®¡è§„åˆ™
â”‚   â”‚       â”œâ”€â”€ NullPointerExceptionRule.java   # âœ… å…è´¹ - åŸºç¡€è§„åˆ™
â”‚   â”‚       â””â”€â”€ SqlInjectionRule.java           # âœ… å…è´¹ - åŸºç¡€è§„åˆ™
â”‚   â”‚       # è¿˜æœ‰æ›´å¤šè§„åˆ™å¯ä»¥æ·»åŠ ...           # ğŸ’° ä»˜è´¹ - é«˜çº§è§„åˆ™
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                       # AIæ¨¡å—ï¼ˆğŸ’° ä»˜è´¹åŠŸèƒ½ï¼‰
â”‚   â”‚   â”œâ”€â”€ AIService.java                    # ğŸ’° ä»˜è´¹ - AIæœåŠ¡æ¥å£
â”‚   â”‚   â”œâ”€â”€ AIServiceFactory.java             # ğŸ’° ä»˜è´¹ - AIå·¥å‚
â”‚   â”‚   â”œâ”€â”€ LangChain4jAIService.java         # ğŸ’° ä»˜è´¹ - AIå®ç°
â”‚   â”‚   â””â”€â”€ AIException.java                  # ğŸ’° ä»˜è´¹ - AIå¼‚å¸¸
â”‚   â”‚
â”‚   â”œâ”€â”€ fix/                      # è‡ªåŠ¨ä¿®å¤æ¨¡å—ï¼ˆğŸ’° ä»˜è´¹åŠŸèƒ½ï¼‰
â”‚   â”‚   â”œâ”€â”€ FixManager.java                   # ğŸ’° ä»˜è´¹ - ä¿®å¤ç®¡ç†
â”‚   â”‚   â””â”€â”€ FixResult.java                    # ğŸ’° ä»˜è´¹ - ä¿®å¤ç»“æœ
â”‚   â”‚
â”‚   â”œâ”€â”€ doc/                      # æ–‡æ¡£ç”Ÿæˆï¼ˆâœ… å…è´¹åŠŸèƒ½ï¼‰
â”‚   â”‚   â”œâ”€â”€ DocGenerator.java                 # âœ… å…è´¹ - æ–‡æ¡£æ¥å£
â”‚   â”‚   â”œâ”€â”€ DocGeneratorFactory.java          # âœ… å…è´¹ - å·¥å‚
â”‚   â”‚   â”œâ”€â”€ MarkdownDocGenerator.java         # âœ… å…è´¹ - Markdownç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ OpenApiDocGenerator.java          # âœ… å…è´¹ - OpenAPIç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ DocGenerationException.java       # âœ… å…è´¹ - å¼‚å¸¸
â”‚   â”‚
â”‚   â””â”€â”€ license/                  # è®¸å¯è¯æ¨¡å—ï¼ˆğŸ’° æ ¸å¿ƒä»˜è´¹åŠŸèƒ½ï¼‰
â”‚       â”œâ”€â”€ License.java                      # ğŸ’° ä»˜è´¹ - è®¸å¯è¯å®ä½“
â”‚       â”œâ”€â”€ LicenseManager.java               # ğŸ’° ä»˜è´¹ - è®¸å¯è¯ç®¡ç†
â”‚       â”œâ”€â”€ LicenseValidator.java             # ğŸ’° ä»˜è´¹ - è®¸å¯è¯éªŒè¯
â”‚       â”œâ”€â”€ LicenseGenerator.java             # ğŸ’° ä»˜è´¹ - è®¸å¯è¯ç”Ÿæˆï¼ˆä»…ä½ ç”¨ï¼‰
â”‚       â”œâ”€â”€ FeaturePermissions.java           # ğŸ’° ä»˜è´¹ - åŠŸèƒ½æƒé™
â”‚       â””â”€â”€ VersionType.java                  # ğŸ’° ä»˜è´¹ - ç‰ˆæœ¬ç±»å‹
```

---

## ğŸ†“ å…è´¹ç‰ˆåŠŸèƒ½æ¸…å•

### 1. åŸºç¡€å®¡è®¡åŠŸèƒ½
- âœ… ä»£ç è§£æï¼ˆJavaParserï¼‰
- âœ… ç©ºæŒ‡é’ˆæ£€æŸ¥ï¼ˆNullPointerExceptionRuleï¼‰
- âœ… SQLæ³¨å…¥æ£€æµ‹ï¼ˆSqlInjectionRuleï¼‰
- âœ… å®¡è®¡ç»“æœè¾“å‡º

### 2. æ–‡æ¡£ç”ŸæˆåŠŸèƒ½
- âœ… Markdownæ ¼å¼æ–‡æ¡£ç”Ÿæˆ
- âœ… OpenAPI 3.0è§„èŒƒç”Ÿæˆ

### 3. é…ç½®ç®¡ç†
- âœ… é…ç½®æŸ¥çœ‹ã€è®¾ç½®ã€åˆ é™¤
- âœ… æœ¬åœ°é…ç½®å­˜å‚¨

### 4. åŸºç¡€å‘½ä»¤
```bash
# åŸºç¡€å®¡è®¡ï¼ˆå…è´¹ï¼‰
java -jar autojav-cli.jar audit <file>

# æ–‡æ¡£ç”Ÿæˆï¼ˆå…è´¹ï¼‰
java -jar autojav-cli.jar doc <directory> -f markdown

# é…ç½®ç®¡ç†ï¼ˆå…è´¹ï¼‰
java -jar autojav-cli.jar config list
```

---

## ğŸ’° ä»˜è´¹ç‰ˆåŠŸèƒ½æ¸…å•

### å›¢é˜Ÿç‰ˆï¼ˆTeamï¼‰Â¥99/äºº/å¹´

**é¢å¤–åŠŸèƒ½ï¼š**
- ğŸ¤– AIæ·±åº¦å®¡è®¡ï¼ˆ`-ai` å‚æ•°ï¼‰
  - è°ƒç”¨å¤§æ¨¡å‹APIè¿›è¡Œæ™ºèƒ½åˆ†æ
  - æ›´å…¨é¢çš„ä»£ç é—®é¢˜æ£€æµ‹
  
- ğŸ”§ è‡ªåŠ¨ä»£ç ä¿®å¤ï¼ˆ`-f` å‚æ•°ï¼‰
  - AIç”Ÿæˆä¿®å¤æ–¹æ¡ˆ
  - è‡ªåŠ¨ä¿®æ”¹æºä»£ç 
  - å¤‡ä»½å’Œå›æ»šåŠŸèƒ½

**æ¶‰åŠä»£ç ï¼š**
- `core/ai/*` - å…¨éƒ¨AIæ¨¡å—
- `core/fix/*` - å…¨éƒ¨ä¿®å¤æ¨¡å—
- `cli/AuditCommand.java` ä¸­çš„ `performAIAudit()` å’Œ `performFix()` æ–¹æ³•
- `core/license/*` - è®¸å¯è¯éªŒè¯ï¼ˆæ§åˆ¶åŠŸèƒ½å¼€å…³ï¼‰

### ä¼ä¸šç‰ˆï¼ˆEnterpriseï¼‰Â¥999/äºº/å¹´

**é¢å¤–åŠŸèƒ½ï¼š**
- ğŸ¢ ç§æœ‰åŒ–éƒ¨ç½²ï¼ˆæ— éœ€è”ç½‘éªŒè¯ï¼‰
- ğŸ”Œ CI/CDé›†æˆæ’ä»¶
- ğŸ‘¥ å›¢é˜Ÿåä½œåŠŸèƒ½
- ğŸ“‹ è‡ªå®šä¹‰å®¡è®¡è§„åˆ™
- ğŸ“Š é«˜çº§æŠ¥è¡¨å¯¼å‡º

**æ¶‰åŠä»£ç ï¼š**
- `core/license/*` - æ›´çµæ´»çš„è®¸å¯è¯ç­–ç•¥
- ç§æœ‰éƒ¨ç½²æœåŠ¡ç«¯ä»£ç ï¼ˆä¸åœ¨å½“å‰ä»“åº“ï¼‰
- CIæ’ä»¶ä»£ç ï¼ˆJenkins/GitLabç­‰ï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### ä»˜è´¹åŠŸèƒ½å¦‚ä½•æ§åˆ¶ï¼Ÿ

åœ¨ `AuditCommand.java` ä¸­ï¼š

```java
// æ£€æŸ¥æƒé™ - å…è´¹åŠŸèƒ½ç›´æ¥æ‰§è¡Œ
if (useAI && !licenseManager.checkAndApplyRestriction("ai.audit")) {
    return 1;  // æ— æƒé™ï¼Œç›´æ¥è¿”å›
}

if (fix && !licenseManager.checkAndApplyRestriction("code.fix")) {
    return 1;  // æ— æƒé™ï¼Œç›´æ¥è¿”å›
}
```

### æƒé™å®šä¹‰

åœ¨ `FeaturePermissions.java` ä¸­ï¼š

```java
// å…è´¹åŠŸèƒ½
permissions.put("code.audit", true);     // âœ… ä»£ç å®¡è®¡
permissions.put("doc.generate", true);   // âœ… æ–‡æ¡£ç”Ÿæˆ
permissions.put("config.manage", true);   // âœ… é…ç½®ç®¡ç†

// ä»˜è´¹åŠŸèƒ½
permissions.put("code.fix", false);       // ğŸ’° ä»£ç ä¿®å¤
permissions.put("ai.audit", false);       // ğŸ’° AIå®¡è®¡
permissions.put("custom.template", false);// ğŸ’° è‡ªå®šä¹‰æ¨¡æ¿
permissions.put("team.collab", false);    // ğŸ’° å›¢é˜Ÿåä½œ
permissions.put("private.deploy", false); // ğŸ’° ç§æœ‰åŒ–éƒ¨ç½²
permissions.put("ci.cd.integration", false);// ğŸ’° CI/CDé›†æˆ
```

---

## ğŸ“¦ ä»£ç æ‹†åˆ†å»ºè®®

### æ–¹æ¡ˆ1ï¼šå½“å‰é¡¹ç›®ä¿æŒå®Œæ•´ï¼ˆæ¨èçŸ­æœŸï¼‰

ä¿ç•™å½“å‰ä»“åº“ç»“æ„ï¼Œé€šè¿‡ **è®¸å¯è¯éªŒè¯** æ§åˆ¶åŠŸèƒ½å¼€å…³ã€‚

**ä¼˜ç‚¹ï¼š**
- å¼€å‘ç®€å•ï¼Œä¸€å¥—ä»£ç 
- ç”¨æˆ·ä¸‹è½½åŒä¸€ä¸ªJARï¼Œé€šè¿‡è®¸å¯è¯åŒºåˆ†åŠŸèƒ½
- å…è´¹ç”¨æˆ·ä¹Ÿèƒ½çœ‹åˆ°ä»˜è´¹åŠŸèƒ½æç¤ºï¼ˆä¿ƒè¿›è½¬åŒ–ï¼‰

**ç¼ºç‚¹ï¼š**
- ä»£ç å®Œå…¨å…¬å¼€ï¼ˆå¦‚æœä»“åº“å…¬å¼€ï¼‰
- å¯èƒ½è¢«ç»•è¿‡éªŒè¯

### æ–¹æ¡ˆ2ï¼šä»£ç ç‰©ç†åˆ†ç¦»ï¼ˆæ¨èé•¿æœŸï¼‰

#### å…¬å¼€ä»“åº“ï¼šautojavï¼ˆå…è´¹æ ¸å¿ƒï¼‰

```
autojav/
â”œâ”€â”€ src/main/java/com/autojav/
â”‚   â”œâ”€â”€ cli/
â”‚   â”‚   â”œâ”€â”€ Main.java
â”‚   â”‚   â”œâ”€â”€ AuditCommand.javaï¼ˆç®€åŒ–ç‰ˆï¼Œå»æ‰AIå’ŒFixè°ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ ConfigCommand.java
â”‚   â”‚   â””â”€â”€ DocCommand.java
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ CodeParser.java
â”‚       â”œâ”€â”€ ConfigManager.java
â”‚       â”œâ”€â”€ audit/
â”‚       â”‚   â”œâ”€â”€ AuditManager.java
â”‚       â”‚   â”œâ”€â”€ AuditResult.java
â”‚       â”‚   â”œâ”€â”€ AuditRule.java
â”‚       â”‚   â””â”€â”€ rules/
â”‚       â”‚       â”œâ”€â”€ NullPointerExceptionRule.java
â”‚       â”‚       â””â”€â”€ SqlInjectionRule.java
â”‚       â””â”€â”€ doc/
```

#### ç§æœ‰ä»“åº“ï¼šautojav-proï¼ˆä»˜è´¹åŠŸèƒ½ï¼‰

```
autojav-pro/
â”œâ”€â”€ src/main/java/com/autojav/
â”‚   â”œâ”€â”€ cli/
â”‚   â”‚   â””â”€â”€ AuditCommandPro.javaï¼ˆåŒ…å«AIå’ŒFixï¼‰
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ ai/           # AIæ¨¡å—
â”‚       â”œâ”€â”€ fix/          # ä¿®å¤æ¨¡å—
â”‚       â””â”€â”€ license/      # è®¸å¯è¯æ¨¡å—
```

---

## ğŸ¯ å»ºè®®çš„ä¸‹ä¸€æ­¥

### çŸ­æœŸï¼ˆç°åœ¨å°±å¯ä»¥åšï¼‰

1. **ä¿æŒå½“å‰ä»“åº“ç§æœ‰**
   - ç”¨æˆ·é€šè¿‡ GitHub Releases ä¸‹è½½é¢„ç¼–è¯‘JAR
   - ä¸éœ€è¦å…¬å¼€æºä»£ç 

2. **åˆ›å»ºè®¸å¯è¯ç³»ç»Ÿ**
   - ç”Ÿæˆä¸åŒçš„è®¸å¯è¯å¯†é’¥
   - å…è´¹ç‰ˆï¼šä¸éœ€è¦å¯†é’¥æˆ–å†…ç½®è¯•ç”¨å¯†é’¥
   - ä»˜è´¹ç‰ˆï¼šç”¨æˆ·è´­ä¹°åè·å¾—å¯†é’¥æ¿€æ´»

### é•¿æœŸï¼ˆæœªæ¥3-6ä¸ªæœˆï¼‰

1. **åˆ›å»ºå¼€æºæ ¸å¿ƒä»“åº“**
   - æŠŠåŸºç¡€åŠŸèƒ½å¼€æºå»ºç«‹ä¿¡ä»»
   - å¸å¼•ç¤¾åŒºè´¡çŒ®è€…

2. **ä¿ç•™ä»˜è´¹åŠŸèƒ½ç§æœ‰**
   - AIæ¨¡å—ï¼ˆAPIæˆæœ¬é«˜ï¼‰
   - è‡ªåŠ¨ä¿®å¤ï¼ˆæ ¸å¿ƒç«äº‰åŠ›ï¼‰
   - ä¼ä¸šçº§åŠŸèƒ½

---

## ğŸ“Š å„æ¨¡å—å•†ä¸šä»·å€¼è¯„ä¼°

| æ¨¡å— | æŠ€æœ¯å«é‡ | ç”¨æˆ·ä»·å€¼ | æˆæœ¬ | å»ºè®®ç­–ç•¥ |
|------|---------|---------|------|---------|
| åŸºç¡€å®¡è®¡ | â­â­â­ | â­â­â­ | ä½ | å…è´¹è·å®¢ |
| AIå®¡è®¡ | â­â­â­â­â­ | â­â­â­â­â­ | é«˜ï¼ˆAPIè´¹ç”¨ï¼‰ | ä»˜è´¹åŠŸèƒ½ |
| è‡ªåŠ¨ä¿®å¤ | â­â­â­â­â­ | â­â­â­â­â­ | é«˜ï¼ˆAIè´¹ç”¨ï¼‰ | ä»˜è´¹åŠŸèƒ½ |
| æ–‡æ¡£ç”Ÿæˆ | â­â­â­ | â­â­â­ | ä½ | å…è´¹åŠŸèƒ½ |
| è®¸å¯è¯ç³»ç»Ÿ | â­â­â­â­ | - | ä½ | åŸºç¡€è®¾æ–½ |

